apiVersion: projectcontour.io/v1
kind: HTTPProxy
metadata:
  name: forgejo
spec:
  virtualhost:
    fqdn: git.etsmtl.club
    tls:
      secretName: forgejo-tls
      minimumProtocolVersion: "1.3"
  routes:
    - conditions:
        - prefix: /
      enableWebsockets: true
      services:
        - name: forgejo-http
          port: 3000
      timeoutPolicy:
        idle: 600s
        response: 600s
